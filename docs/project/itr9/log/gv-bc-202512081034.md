prompt:
{
  "ors": {
    "prompt": "\nあなたはCBTベースの思考整理アプリのORS生成AIです。\n選定されたWidgetと悩みに基づいて、データ構造（ORS）を生成してください。\n\n## ユーザーの悩み\n研究活動が楽しすぎて寝るのを忘れてしまう\n\n## 現在のステージ\ndiverge\n\n## ステージの目的\n研究活動と睡眠に関する思考や感情を広げ、問題の全体像を認識する。\n\n## ステージの対象\n研究活動への熱中度、睡眠不足の原因と影響、潜在的な解決策のアイデア\n\n## 選定されたWidget\n[\n  {\n    \"widgetId\": \"brainstorm_cards\",\n    \"purpose\": \"「研究活動が楽しすぎて寝るのを忘れる」ことに関するあらゆる思考、感情、アイデアを自由に書き出し、可視化する。\",\n    \"order\": 0,\n    \"suggestedConfig\": {\n      \"title\": \"研究活動と睡眠に関する思考\",\n      \"placeholder\": \"研究の魅力、寝ない理由、睡眠不足の弊害などを書き出す\"\n    },\n    \"suggestedBindings\": []\n  },\n  {\n    \"widgetId\": \"question_card_chain\",\n    \"purpose\": \"ブレインストームで洗い出した思考に対し、「なぜ？」や「どうなる？」といった質問を連鎖させ、問題の背景と影響を深掘りする。\",\n    \"order\": 1,\n    \"suggestedConfig\": {\n      \"initialQuestion\": \"なぜ研究活動が楽しすぎて寝るのを忘れてしまうのか？\",\n      \"suggestedQuestions\": [\n        \"研究活動のどの部分に最も喜びを感じるか？\",\n        \"睡眠を削ることで、具体的にどのようなメリット・デメリットを感じるか？\",\n        \"もし十分な睡眠を取れたとしたら、研究活動はどう変わると思うか？\",\n        \"長期的にこの状況が続くとどうなると思うか？\"\n      ]\n    },\n    \"suggestedBindings\": []\n  }\n]\n\n## Widget入出力ポート情報\n[\n  {\n    \"widgetId\": \"brainstorm_cards\",\n    \"purpose\": \"「研究活動が楽しすぎて寝るのを忘れる」ことに関するあらゆる思考、感情、アイデアを自由に書き出し、可視化する。\",\n    \"inputs\": [],\n    \"outputs\": [\n      {\n        \"id\": \"cards\",\n        \"dataType\": \"object[]\",\n        \"description\": \"カードリスト {id: string, text: string, color?: string}\"\n      },\n      {\n        \"id\": \"cardCount\",\n        \"dataType\": \"number\",\n        \"description\": \"カードの総数\"\n      }\n    ]\n  },\n  {\n    \"widgetId\": \"question_card_chain\",\n    \"purpose\": \"ブレインストームで洗い出した思考に対し、「なぜ？」や「どうなる？」といった質問を連鎖させ、問題の背景と影響を深掘りする。\",\n    \"inputs\": [\n      {\n        \"id\": \"questions\",\n        \"dataType\": \"string[]\",\n        \"description\": \"提示する質問リスト\",\n        \"required\": false\n      }\n    ],\n    \"outputs\": [\n      {\n        \"id\": \"answers\",\n        \"dataType\": \"object[]\",\n        \"description\": \"回答リスト {questionId: string, answer: string}\"\n      },\n      {\n        \"id\": \"completedCount\",\n        \"dataType\": \"number\",\n        \"description\": \"回答済みの質問数\"\n      }\n    ]\n  }\n]\n\n## 前ステージの結果\nなし（初回ステージ）\n\n## タスク\n以下のデータ構造を生成してください：\n\n### 1. Entityの定義\n各Widgetが必要とするデータをEntity（データオブジェクト）として定義します。\n\n**Entityの種類**:\n- **concern**: ユーザーの元の悩みテキスト（必須）\n- **stage_data**: このステージ固有のデータ（前ステージからの引き継ぎを含む）\n- **widget_data**: Widget固有の入出力データ\n- **shared_data**: Widget間で共有されるデータ\n\n### 2. Attributeの定義\n各Entityの属性（プロパティ）を定義します。\n\n**構造型（structuralType）**:\n- **SVAL**: スカラー値（単一の文字列、数値、真偽値など）\n- **ARRY**: 配列（リスト形式のデータ）\n- **PNTR**: ポインタ（他のEntity.Attributeへの参照）\n- **DICT**: 辞書（キー・バリューペア）\n\n**具体型（valueType）**: string, number, boolean, date, object\n\n### 3. GenerationSpecの定義（オプション）\nLLMによって生成される値の仕様を定義します。\n\n**生成タイプ**:\n- **label**: UIの「枠」を埋めるラベル・説明文\n- **sample**: ユーザー入力の叩き台となるサンプルデータ\n\n### 4. DependencyGraphの定義\nEntity.Attribute間のデータ依存関係を定義します。\n\n**メカニズム**:\n- **validate**: ソースの変更時にターゲットの値を検証\n- **update**: ソースの変更時にターゲットの値を更新\n\n**関係仕様タイプ**:\n- **javascript**: JavaScript式による変換/検証\n- **transform**: 変換式\n- **llm**: LLMによる処理\n\n## 出力形式\n以下のJSON形式で出力してください：\n\n```json\n{\n  \"version\": \"4.0\",\n  \"entities\": [\n    {\n      \"id\": \"concern\",\n      \"type\": \"concern\",\n      \"attributes\": [\n        {\n          \"name\": \"text\",\n          \"structuralType\": \"SVAL\",\n          \"valueType\": \"string\",\n          \"description\": \"ユーザーの元の悩みテキスト\"\n        }\n      ]\n    },\n    {\n      \"id\": \"diverge_data\",\n      \"type\": \"stage_data\",\n      \"attributes\": [\n        {\n          \"name\": \"items\",\n          \"structuralType\": \"ARRY\",\n          \"itemType\": \"SVAL\",\n          \"itemValueType\": \"string\",\n          \"description\": \"発散フェーズで出たアイデアのリスト\",\n          \"generation\": {\n            \"type\": \"sample\",\n            \"prompt\": \"ユーザーの悩みに関連するアイデアを5つ生成\",\n            \"context\": [\"concern.text\"]\n          }\n        }\n      ]\n    },\n    {\n      \"id\": \"brainstorm_widget\",\n      \"type\": \"widget_data\",\n      \"attributes\": [\n        {\n          \"name\": \"input_items\",\n          \"structuralType\": \"ARRY\",\n          \"itemType\": \"SVAL\",\n          \"itemValueType\": \"string\",\n          \"description\": \"ブレインストームの初期アイテム\"\n        },\n        {\n          \"name\": \"output_items\",\n          \"structuralType\": \"ARRY\",\n          \"itemType\": \"SVAL\",\n          \"itemValueType\": \"string\",\n          \"description\": \"ユーザーが追加・編集したアイテム\"\n        }\n      ]\n    }\n  ],\n  \"dependencyGraph\": {\n    \"dependencies\": [\n      {\n        \"id\": \"dep_concern_to_brainstorm\",\n        \"source\": \"diverge_data.items\",\n        \"target\": \"brainstorm_widget.input_items\",\n        \"mechanism\": \"update\",\n        \"relationship\": {\n          \"type\": \"javascript\",\n          \"javascript\": \"source\"\n        }\n      }\n    ],\n    \"metadata\": {\n      \"version\": \"4.0\",\n      \"generatedAt\": 1765156543565\n    }\n  },\n  \"metadata\": {\n    \"generatedAt\": 1765156543565,\n    \"llmModel\": \"gemini-2.5-flash\",\n    \"sessionId\": \"{{sessionId}}\",\n    \"stage\": \"diverge\"\n  }\n}\n```\n\n## 重要な注意点\n1. Widget入出力ポート情報を参照し、各WidgetのポートIDと型に合致する属性を定義してください\n2. required=trueの入力ポートには必ず対応するEntity.Attributeを用意してください\n3. 前ステージの結果がある場合は、それを引き継ぐEntity/Attributeを定義してください\n4. generationを使用する場合は、contextに参照するEntity.Attributeを明記してください\n",
    "inputParams": {
      "concernText": "研究活動が楽しすぎて寝るのを忘れてしまう",
      "stage": "diverge",
      "stageSelection": {
        "widgets": [
          {
            "widgetId": "brainstorm_cards",
            "purpose": "「研究活動が楽しすぎて寝るのを忘れる」ことに関するあらゆる思考、感情、アイデアを自由に書き出し、可視化する。",
            "order": 0,
            "suggestedConfig": {
              "title": "研究活動と睡眠に関する思考",
              "placeholder": "研究の魅力、寝ない理由、睡眠不足の弊害などを書き出す"
            },
            "suggestedBindings": []
          },
          {
            "widgetId": "question_card_chain",
            "purpose": "ブレインストームで洗い出した思考に対し、「なぜ？」や「どうなる？」といった質問を連鎖させ、問題の背景と影響を深掘りする。",
            "order": 1,
            "suggestedConfig": {
              "initialQuestion": "なぜ研究活動が楽しすぎて寝るのを忘れてしまうのか？",
              "suggestedQuestions": [
                "研究活動のどの部分に最も喜びを感じるか？",
                "睡眠を削ることで、具体的にどのようなメリット・デメリットを感じるか？",
                "もし十分な睡眠を取れたとしたら、研究活動はどう変わると思うか？",
                "長期的にこの状況が続くとどうなると思うか？"
              ]
            },
            "suggestedBindings": []
          }
        ],
        "purpose": "研究活動と睡眠に関する思考や感情を広げ、問題の全体像を認識する。",
        "target": "研究活動への熱中度、睡眠不足の原因と影響、潜在的な解決策のアイデア",
        "description": "まずは頭の中にある情報を全て出し、関連する疑問を深掘りすることで、問題の多角的な側面を洗い出します。",
        "estimatedDuration": 300
      }
    }
  },
  "uiSpec": {
    "prompt": "\nあなたはCBTベースの思考整理アプリのUISpec生成AIです。\nORS（データ構造）と選定Widgetに基づいて、UISpec（画面仕様）を生成してください。\n\n## ORS（データ構造）\n{\n  \"version\": \"4.0\",\n  \"entities\": [\n    {\n      \"id\": \"concern\",\n      \"type\": \"concern\",\n      \"attributes\": [\n        {\n          \"name\": \"text\",\n          \"structuralType\": \"SVAL\",\n          \"valueType\": \"string\",\n          \"description\": \"ユーザーの元の悩みテキスト\"\n        }\n      ]\n    },\n    {\n      \"id\": \"diverge_data\",\n      \"type\": \"stage_data\",\n      \"attributes\": [\n        {\n          \"name\": \"items\",\n          \"structuralType\": \"ARRY\",\n          \"itemType\": \"SVAL\",\n          \"itemValueType\": \"string\",\n          \"description\": \"divergeステージのデータ項目\"\n        }\n      ]\n    }\n  ],\n  \"dependencyGraph\": {\n    \"dependencies\": [],\n    \"metadata\": {\n      \"version\": \"4.0\",\n      \"generatedAt\": 1765156782338\n    }\n  },\n  \"metadata\": {\n    \"generatedAt\": 1765156782338,\n    \"llmModel\": \"fallback\",\n    \"sessionId\": \"32e14e42-0f21-468a-967a-1caa16ca1f3b\",\n    \"stage\": \"diverge\"\n  }\n}\n\n## 選定されたWidget情報\n{\n  \"widgets\": [\n    {\n      \"widgetId\": \"brainstorm_cards\",\n      \"purpose\": \"「研究活動が楽しすぎて寝るのを忘れる」ことに関するあらゆる思考、感情、アイデアを自由に書き出し、可視化する。\",\n      \"order\": 0,\n      \"suggestedConfig\": {\n        \"title\": \"研究活動と睡眠に関する思考\",\n        \"placeholder\": \"研究の魅力、寝ない理由、睡眠不足の弊害などを書き出す\"\n      },\n      \"suggestedBindings\": []\n    },\n    {\n      \"widgetId\": \"question_card_chain\",\n      \"purpose\": \"ブレインストームで洗い出した思考に対し、「なぜ？」や「どうなる？」といった質問を連鎖させ、問題の背景と影響を深掘りする。\",\n      \"order\": 1,\n      \"suggestedConfig\": {\n        \"initialQuestion\": \"なぜ研究活動が楽しすぎて寝るのを忘れてしまうのか？\",\n        \"suggestedQuestions\": [\n          \"研究活動のどの部分に最も喜びを感じるか？\",\n          \"睡眠を削ることで、具体的にどのようなメリット・デメリットを感じるか？\",\n          \"もし十分な睡眠を取れたとしたら、研究活動はどう変わると思うか？\",\n          \"長期的にこの状況が続くとどうなると思うか？\"\n        ]\n      },\n      \"suggestedBindings\": []\n    }\n  ],\n  \"purpose\": \"研究活動と睡眠に関する思考や感情を広げ、問題の全体像を認識する。\",\n  \"target\": \"研究活動への熱中度、睡眠不足の原因と影響、潜在的な解決策のアイデア\",\n  \"description\": \"まずは頭の中にある情報を全て出し、関連する疑問を深掘りすることで、問題の多角的な側面を洗い出します。\",\n  \"estimatedDuration\": 300\n}\n\n## 現在のステージ\ndiverge\n\n## Widget定義情報\n[\n  {\n    \"id\": \"brainstorm_cards\",\n    \"name\": \"ブレインストームカード\",\n    \"description\": \"自由にアイデアをカードとして追加し、視覚的に整理する。\",\n    \"complexity\": 0.2,\n    \"inputs\": [],\n    \"outputs\": [\n      {\n        \"id\": \"cards\",\n        \"dataType\": \"object[]\",\n        \"description\": \"カードリスト {id: string, text: string, color?: string}\"\n      },\n      {\n        \"id\": \"cardCount\",\n        \"dataType\": \"number\",\n        \"description\": \"カードの総数\"\n      }\n    ],\n    \"generationHints\": {\n      \"samples\": {\n        \"field\": \"sampleCards\",\n        \"instruction\": \"ユーザーの悩みに関連するアイデアの種となるカードを2-3個生成してください。ユーザーの思考を促すきっかけとなる具体的な内容にしてください。\",\n        \"count\": {\n          \"min\": 2,\n          \"max\": 3\n        },\n        \"schema\": {\n          \"id\": \"string (sample_1, sample_2, ...)\",\n          \"text\": \"string (日本語、15-30文字程度)\",\n          \"color\": \"string (optional, hex color)\"\n        }\n      }\n    }\n  },\n  {\n    \"id\": \"question_card_chain\",\n    \"name\": \"質問カードチェーン\",\n    \"description\": \"質問に対する回答を連鎖的に記録し、思考の流れを可視化。\",\n    \"complexity\": 0.3,\n    \"inputs\": [\n      {\n        \"id\": \"questions\",\n        \"dataType\": \"string[]\",\n        \"description\": \"提示する質問リスト\",\n        \"required\": false\n      }\n    ],\n    \"outputs\": [\n      {\n        \"id\": \"answers\",\n        \"dataType\": \"object[]\",\n        \"description\": \"回答リスト {questionId: string, answer: string}\"\n      },\n      {\n        \"id\": \"completedCount\",\n        \"dataType\": \"number\",\n        \"description\": \"回答済みの質問数\"\n      }\n    ]\n  }\n]\n\n## Reactivityモード\ntrue\n\n## タスク\n以下を生成してください：\n\n### 1. WidgetSpecの定義\n各Widgetの具体的な仕様を定義します。\n\n**必須フィールド**:\n- **id**: UISpec内で一意のWidget ID（例: \"brainstorm_0\", \"card_sorting_1\"）\n- **component**: Widget種別（選定されたwidgetIdと一致）\n- **position**: 表示順序（0から開始）\n- **config**: Widget固有の設定\n- **dataBindings**: ORSとのデータ連携\n\n### 2. DataBindingの定義\nWidgetのPortとORSのEntity.Attributeを対応付けます。\n\n**バインディング方向**:\n- **in**: ORSからWidgetへの入力（Widget初期化時）\n- **out**: WidgetからORSへの出力（Widget操作時）\n- **inout**: 双方向バインディング\n\n### 3. ReactiveBindingの定義（Reactivity有効時）\nWidget間のリアクティブなUI連携を定義します。\n\n**メカニズム**:\n- **update**: ソースの変更時にターゲットの値を更新\n- **validate**: ソースの変更時にターゲットの値を検証\n\n**関係仕様タイプ**:\n- **passthrough**: 値をそのまま渡す\n- **javascript**: JavaScript式による変換\n- **transform**: 変換式による処理\n- **llm**: LLMによる処理\n\n**更新モード**:\n- **realtime**: 即座に反映\n- **debounced**: 遅延後に反映（連続入力の最適化）\n- **on_confirm**: ユーザー確認後に反映\n\n### 4. レイアウト設定\n画面全体のレイアウトを定義します。\n\n### 5. コンテンツ生成（generatedValue）\nWidget定義に**generationHints**がある場合、ユーザーの悩みに関連するコンテンツを動的に生成してconfig内に配置してください。\n\n**Type B: サンプルデータ（samples）**\ngenerationHints.samplesが定義されている場合:\n- fieldで指定されたキー（例: \"sampleCards\"）にGeneratedContentContainerを配置\n- instructionに従い、countで指定された範囲の数のアイテムを生成\n- 各アイテムには必ず**isGenerated: true**を付与\n- コンテナにも**isGenerated: true**を付与\n\n**生成例: BrainstormCards**\nユーザーの悩み: 「転職するか迷っている」\n\n```json\n{\n  \"id\": \"brainstorm_0\",\n  \"component\": \"brainstorm_cards\",\n  \"config\": {\n    \"title\": \"転職について考えてみましょう\",\n    \"sampleCards\": {\n      \"items\": [\n        { \"id\": \"sample_1\", \"text\": \"現職で得られているもの・失うもの\", \"isGenerated\": true },\n        { \"id\": \"sample_2\", \"text\": \"転職で実現したい理想の働き方\", \"isGenerated\": true }\n      ],\n      \"isGenerated\": true\n    }\n  }\n}\n```\n\n**重要ルール**:\n1. 生成内容はユーザーの**具体的な悩みの内容に関連**させる（一般的すぎる内容はNG）\n2. サンプルは「考えるきっかけ」であり、**完成した答えではない**\n3. **日本語で生成**する\n4. **isGenerated: true**マーカーを必ず付与する\n5. generationHintsがないWidgetには生成コンテンツを含めない\n\n## 出力形式\n以下のJSON形式で出力してください：\n\n```json\n{\n  \"version\": \"4.0\",\n  \"sessionId\": \"{{sessionId}}\",\n  \"stage\": \"diverge\",\n  \"widgets\": [\n    {\n      \"id\": \"brainstorm_0\",\n      \"component\": \"brainstorm_cards\",\n      \"position\": 0,\n      \"layout\": \"full\",\n      \"config\": {\n        \"title\": \"アイデアを出してみましょう\",\n        \"placeholder\": \"思いついたことを書いてください\",\n        \"minItems\": 3,\n        \"maxItems\": 10\n      },\n      \"dataBindings\": [\n        {\n          \"portId\": \"input_items\",\n          \"entityAttribute\": \"diverge_data.items\",\n          \"direction\": \"in\"\n        },\n        {\n          \"portId\": \"output_items\",\n          \"entityAttribute\": \"brainstorm_widget.output_items\",\n          \"direction\": \"out\"\n        }\n      ],\n      \"metadata\": {\n        \"purpose\": \"悩みに関連するアイデアを発散的に出す\"\n      }\n    },\n    {\n      \"id\": \"emotion_palette_1\",\n      \"component\": \"emotion_palette\",\n      \"position\": 1,\n      \"layout\": \"half\",\n      \"config\": {\n        \"emotionSet\": \"basic\",\n        \"multiSelect\": true\n      },\n      \"dataBindings\": [\n        {\n          \"portId\": \"selected_emotions\",\n          \"entityAttribute\": \"emotion_widget.emotions\",\n          \"direction\": \"out\"\n        }\n      ],\n      \"metadata\": {\n        \"purpose\": \"アイデアに対する感情を可視化\"\n      }\n    }\n  ],\n  \"reactiveBindings\": {\n    \"bindings\": [\n      {\n        \"id\": \"binding_brainstorm_to_emotion\",\n        \"source\": \"brainstorm_0.output_items\",\n        \"target\": \"emotion_palette_1.context_items\",\n        \"mechanism\": \"update\",\n        \"relationship\": {\n          \"type\": \"passthrough\"\n        },\n        \"updateMode\": \"debounced\",\n        \"debounceMs\": 500,\n        \"description\": \"ブレインストームの結果を感情パレットに連携\",\n        \"enabled\": true\n      }\n    ],\n    \"metadata\": {\n      \"version\": \"4.0\",\n      \"generatedAt\": 1765156543565\n    }\n  },\n  \"layout\": {\n    \"type\": \"single_column\",\n    \"gap\": 16,\n    \"padding\": {\n      \"top\": 16,\n      \"right\": 16,\n      \"bottom\": 16,\n      \"left\": 16\n    }\n  },\n  \"metadata\": {\n    \"generatedAt\": 1765156543565,\n    \"llmModel\": \"gemini-2.5-flash\"\n  }\n}\n```\n\n## 重要な注意点\n\n### DataBinding\n1. 各WidgetのポートIDはWidget定義のports.inputs/outputsを参照してください\n2. entityAttributeは「entityId.attributeName」形式でORSと一致させてください\n3. required=trueの入力ポートには必ずdirectionが'in'または'inout'のバインディングを定義してください\n\n### ReactiveBinding（Reactivity有効時のみ）\n1. source/targetは「widgetId.portId」形式で指定してください\n2. complexityの高いWidget（0.4以上）をターゲットにする場合はdebounced/on_confirmを検討してください\n3. 同一ソースから複数ターゲットへのバインディングは可能ですが、循環参照は避けてください\n4. 前後のWidget間でデータを連携する場合はpassthroughが基本です\n5. データ変換が必要な場合はjavascript関係を使用してください\n\n### レイアウト\n1. Widget数が少ない（2つ以下）場合は'single_column'を推奨\n2. 関連性の高いWidgetは近い位置に配置してください\n3. 主要なWidgetは'full'レイアウト、補助的なWidgetは'half'/'third'を検討してください\n",
    "inputParams": {
      "ors": {
        "version": "4.0",
        "entities": [
          {
            "id": "concern",
            "type": "concern",
            "attributes": [
              {
                "name": "text",
                "structuralType": "SVAL",
                "valueType": "string",
                "description": "ユーザーの元の悩みテキスト"
              }
            ]
          },
          {
            "id": "diverge_data",
            "type": "stage_data",
            "attributes": [
              {
                "name": "items",
                "structuralType": "ARRY",
                "itemType": "SVAL",
                "itemValueType": "string",
                "description": "divergeステージのデータ項目"
              }
            ]
          }
        ],
        "dependencyGraph": {
          "dependencies": [],
          "metadata": {
            "version": "4.0",
            "generatedAt": 1765156782338
          }
        },
        "metadata": {
          "generatedAt": 1765156782338,
          "llmModel": "fallback",
          "sessionId": "32e14e42-0f21-468a-967a-1caa16ca1f3b",
          "stage": "diverge"
        }
      },
      "stageSelection": {
        "widgets": [
          {
            "widgetId": "brainstorm_cards",
            "purpose": "「研究活動が楽しすぎて寝るのを忘れる」ことに関するあらゆる思考、感情、アイデアを自由に書き出し、可視化する。",
            "order": 0,
            "suggestedConfig": {
              "title": "研究活動と睡眠に関する思考",
              "placeholder": "研究の魅力、寝ない理由、睡眠不足の弊害などを書き出す"
            },
            "suggestedBindings": []
          },
          {
            "widgetId": "question_card_chain",
            "purpose": "ブレインストームで洗い出した思考に対し、「なぜ？」や「どうなる？」といった質問を連鎖させ、問題の背景と影響を深掘りする。",
            "order": 1,
            "suggestedConfig": {
              "initialQuestion": "なぜ研究活動が楽しすぎて寝るのを忘れてしまうのか？",
              "suggestedQuestions": [
                "研究活動のどの部分に最も喜びを感じるか？",
                "睡眠を削ることで、具体的にどのようなメリット・デメリットを感じるか？",
                "もし十分な睡眠を取れたとしたら、研究活動はどう変わると思うか？",
                "長期的にこの状況が続くとどうなると思うか？"
              ]
            },
            "suggestedBindings": []
          }
        ],
        "purpose": "研究活動と睡眠に関する思考や感情を広げ、問題の全体像を認識する。",
        "target": "研究活動への熱中度、睡眠不足の原因と影響、潜在的な解決策のアイデア",
        "description": "まずは頭の中にある情報を全て出し、関連する疑問を深掘りすることで、問題の多角的な側面を洗い出します。",
        "estimatedDuration": 300
      },
      "stage": "diverge",
      "enableReactivity": true
    }
  }
}

---

ORS+DpG:
{
  "version": "4.0",
  "entities": [
    {
      "id": "concern",
      "type": "concern",
      "attributes": [
        {
          "name": "text",
          "valueType": "string",
          "description": "ユーザーの元の悩みテキスト",
          "structuralType": "SVAL"
        }
      ]
    },
    {
      "id": "diverge_data",
      "type": "stage_data",
      "attributes": [
        {
          "name": "items",
          "itemType": "SVAL",
          "description": "divergeステージのデータ項目",
          "itemValueType": "string",
          "structuralType": "ARRY"
        }
      ]
    }
  ],
  "metadata": {
    "stage": "diverge",
    "llmModel": "fallback",
    "sessionId": "32e14e42-0f21-468a-967a-1caa16ca1f3b",
    "generatedAt": 1765156782338
  },
  "dependencyGraph": {
    "metadata": {
      "version": "4.0",
      "generatedAt": 1765156782338
    },
    "dependencies": []
  }
}

---

UISpec:

{
  "stage": "diverge",
  "layout": {
    "type": "single_column"
  },
  "version": "4.0",
  "widgets": [
    {
      "id": "brainstorm_cards_0",
      "config": {
        "title": "研究活動と睡眠に関する思考",
        "placeholder": "研究の魅力、寝ない理由、睡眠不足の弊害などを書き出す"
      },
      "metadata": {
        "purpose": "「研究活動が楽しすぎて寝るのを忘れる」ことに関するあらゆる思考、感情、アイデアを自由に書き出し、可視化する。"
      },
      "position": 0,
      "component": "brainstorm_cards",
      "dataBindings": []
    },
    {
      "id": "question_card_chain_1",
      "config": {
        "initialQuestion": "なぜ研究活動が楽しすぎて寝るのを忘れてしまうのか？",
        "suggestedQuestions": [
          "研究活動のどの部分に最も喜びを感じるか？",
          "睡眠を削ることで、具体的にどのようなメリット・デメリットを感じるか？",
          "もし十分な睡眠を取れたとしたら、研究活動はどう変わると思うか？",
          "長期的にこの状況が続くとどうなると思うか？"
        ]
      },
      "metadata": {
        "purpose": "ブレインストームで洗い出した思考に対し、「なぜ？」や「どうなる？」といった質問を連鎖させ、問題の背景と影響を深掘りする。"
      },
      "position": 1,
      "component": "question_card_chain",
      "dataBindings": [
        {
          "portId": "questions",
          "direction": "in",
          "entityAttribute": "diverge_data.items"
        }
      ]
    }
  ],
  "metadata": {
    "llmModel": "fallback",
    "generatedAt": 1765156814275
  },
  "sessionId": "32e14e42-0f21-468a-967a-1caa16ca1f3b",
  "reactiveBindings": {
    "bindings": [
      {
        "id": "binding_brainstorm_cards_0_question_card_chain_1",
        "source": "brainstorm_cards_0.cards",
        "target": "question_card_chain_1.questions",
        "enabled": true,
        "mechanism": "update",
        "updateMode": "realtime",
        "description": "Default sequential binding",
        "relationship": {
          "type": "passthrough"
        }
      }
    ],
    "metadata": {
      "version": "4.0",
      "generatedAt": 1765156814275
    }
  }
}
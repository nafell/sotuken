# 卒業論文アウトライン
## ドメイン特化型LLM動的UI生成システムの設計パラダイム ― 思考整理支援アプリケーションを題材として

---

## 1. Introduction

### 1.1 背景：UIの柔軟化への要求
- コンピュータの普遍化により、現代のアプリケーションには複雑な責務と多様な要望が求められる
- アプリは特定のユースケースに最適化することで「使いやすく」なる
- しかし、要望が多岐に渡ると機能/UIを全員に最適化することには限度がある
- **問い：LLMでUIを動的生成すれば解決できるのでは？**

### 1.2 背景：LLMによるリアルタイムUI生成の登場
- LLMによるコーディングの発展（コード補完→自然言語変換→自律エージェント）
- 開発段階ではプログラマが介在するため、LLMの不完全さを補完できる
- しかし、リアルタイム生成では専門家が介在しない（LLM→利用者）
- **課題：LLMの不安定さ（再現性、誤り）をどう制御するか？**

### 1.3 既存研究：LLM-Hardened DSLによる解決
- LLM-Hardened DSL：LLMが扱いやすいDSLを定義し、出力の自由度を制限する手法
- Jellyの成果：GeneralなDSLで柔軟なUI生成を実現
- **残された課題：**
  1. GeneralなDSLはトークンコストが高い
  2. プロンプトが長くなり生成品質が希釈される
  3. ユーザーが継続的にプロンプトを与える必要がある

### 1.4 研究目的
- **主目的：ドメイン特化型LLM動的UI生成の設計パラダイムを確立する**
  - 「何を固定し、何を動的にすべきか」の判断基準を明らかにする
  - 設計判断の経緯と論理を体系化する
- **副次的目的：**
  - Widget-to-Widget Reactivityによる動的生成の必要性を実証
  - ドメイン特化によるトークン削減効果を検証

### 1.5 研究の貢献
1. **設計パラダイムの提示**：ドメイン特化型動的UIシステムにおいて、何を固定し何を動的にすべきかの判断基準
2. **Widget-to-Widget Reactivityの提案**：同一画面上でのWidget間連動を動的生成する手法
3. **思考整理アプリでの実証**：提案手法の有効性を具体的なドメインで検証

---

## 2. Related Work

### 2.1 LLMによるUI生成
- **Jelly** [引用]
  - GeneralなLLM-Hardened DSLによる動的UI生成
  - OODM + DpG + DSLの3層アーキテクチャ
  - Item-to-Itemのリアクティビティ
  - **本研究との差異：** General vs Domain-Specific、Item vs Widget単位
- **その他のLLM UI生成研究**（要追加調査）
  - 比較軸：動的生成の粒度、ドメイン特化の有無、ユーザー入力の必要性

### 2.2 LLM-Hardened DSL
- 概念：LLMの出力自由度を制限することで品質を担保
- 宣言型（JSON）vs 手続き型
  - 従来的なUIフレームワークの分類と発想が共通
- 本研究の位置づけ：宣言型DSLをドメイン特化させる

### 2.3 思考整理支援ツール
- マインドマップツール（MindMeister, XMind等）
- タスク管理アプリ（Todoist, Notion等）
- 思考整理専用ツール（Miro, FigJam等）
- **共通の限界：** 固定UIであり、ユーザーの悩みに適応しない
- 本研究の位置づけ：悩みに応じてUIフロー全体を動的生成

---

## 3. Proposed Method

### 3.1 問題提起：なぜドメイン特化が必要か

#### 3.1.1 GeneralなDSLの問題点
- トークンコストが高い（要素が多い）
- プロンプトが長くなり、LLMの注意が分散する
- 特定タスクに不要な要素まで考慮させてしまう

#### 3.1.2 「固定UIで十分では？」への反論
- ドメイン特化すると「100パターン用意すればいい」という反論が生じる
- **反論の核心：** ドメイン特化しても動的生成が必要な理由がある
  1. Widget-to-Widget Reactivity：前段階の出力が次段階のUI設定に影響
  2. 段階的複雑化：ユーザーの認知負荷を段階的に調整
  3. UI設定のカスタマイズ：ラベル・プロンプトをユーザーの文脈に適応

### 3.2 設計パラダイム：何を固定し、何を動的にするか

#### 3.2.1 設計空間の整理
| 要素 | 固定/動的 | 理由 |
|------|----------|------|
| コンポーネント種類 | 固定 | トークン削減、選択肢の明確化 |
| フロー構造 | 半固定 | ドメイン知識の活用（発散→整理→収束） |
| コンポーネント選択 | 動的 | ユーザーの悩みに適応 |
| コンポーネント順序 | 動的 | ボトルネックに応じた最適化 |
| UI設定 | 動的 | ラベル・プロンプトの文脈適応 |
| データ依存関係 | 動的 | Widget-to-Widget Reactivity |

#### 3.2.2 判断基準の体系化
- **固定すべき要素の基準：**
  - ドメイン知識として事前に定義可能
  - 選択肢を限定することでLLMの判断が容易になる
  - トークン削減に直接寄与する
- **動的にすべき要素の基準：**
  - ユーザー入力に依存して変化する
  - 固定すると「固定UIでいい」反論に勝てない
  - 動的生成によりユーザー体験が向上する

### 3.3 Widget-to-Widget Reactivity

#### 3.3.1 概念
- 同一画面上に複数のWidgetを配置
- ユーザーが一方を操作すると、他方がリアルタイムに更新
- LLMは介在せず、依存関係定義に基づいて機械的に連動

#### 3.3.2 Jellyとの差異
| 観点 | Jelly | 本研究 |
|------|-------|--------|
| 連動単位 | Item（データ項目） | Widget（UI部品） |
| 連動タイミング | 画面遷移時 | 同一画面上でリアルタイム |
| 定義方法 | DpGで動的生成 | DpGで動的生成（継承） |

#### 3.3.3 設計上の役割
- 「固定UIでいい」反論への主要な回答
- 動的生成でなければ実現できない価値を提供
- 例：スライダー調整→ランキング即時更新、カード配置→不足情報自動検出

### 3.4 3層アーキテクチャ（Jellyからの継承と拡張）

#### 3.4.1 Layer 1: Object-Oriented Data Model (OODM)
- セッション全体で扱うデータ構造を定義
- **ドメイン特化による変更：** データ型を思考整理に特化して事前定義

#### 3.4.2 Layer 2: Dependency Graph (DpG)
- Widget間のデータ依存関係を定義
- **拡張：** Widget-to-Widget Reactivityのためのリアルタイムバインディング

#### 3.4.3 Layer 3: UI Specification (DSL)
- 具体的なUI要素とレイアウトを定義
- **ドメイン特化による変更：** コンポーネントを12種類に限定

### 3.5 生成パイプライン

```
Capture Data（ユーザー入力）
    ↓
LLM: ボトルネック診断
    ↓
LLM: OODM + DpG生成
    ↓
LLM: DSL生成
    ↓
Renderer: UI描画
    ↓
ユーザー操作 → Reactive更新（LLM不介在）
```

---

## 4. Implementation

### 4.1 思考整理支援アプリの概要

#### 4.1.1 なぜ思考整理を題材としたか
- 悩みの内容・状況・ユーザー背景が多様
- 状況に応じて刻々と変化する
- ユーザーの認知思考特性が多岐に渡る
- 固定UIでは対応困難、ユーザー自身のカスタマイズも困難
- → ドメイン特化型動的UI生成の価値を実証しやすい

#### 4.1.2 アプリ構成
```
Capture Phase: 悩みの入力・タグ付け・問診
    ↓
Plan Phase: 思考整理（本研究の主対象）
    ↓
Breakdown Phase: タスク分解（簡易実装）
```

### 4.2 Plan Phaseの設計

#### 4.2.1 3ステージ構造
1. **発散・探索 (Diverge)**: 可能性を広げ、選択肢を増やす
2. **整理・評価 (Organize)**: 選択肢を構造化し、関係性を把握
3. **収束・決定 (Converge)**: 優先順位をつけ、方針を確定
4. **まとめ (Summary)**: 構造化文章で確認・修正

#### 4.2.2 ボトルネック診断
- LLMがCapture情報から思考の障壁を診断
- 8種類のボトルネックタイプ：
  1. 選択肢が多すぎる
  2. 何から考えればいいか分からない
  3. 複数の問題が絡んでいる
  4. 感情的ブロック
  5. 情報不足
  6. 決断への恐れ
  7. 視点固定
  8. 優先順位がつけられない

### 4.3 コンポーネントライブラリ

#### 4.3.1 メタデータ設計
- **timing**: 0.0（序盤）～1.0（終盤）の推奨タイミング
- **versatility**: 汎用性スコア（高→様々な場面で使用可能）
- **対応ボトルネック**: どの思考障壁に有効か

#### 4.3.2 コンポーネント一覧（12種類）
**Stage 1（発散）:**
- ブレインストームカード
- 感情カラーパレット
- 質問カード連鎖（LLM活用）
- マインドマップ生成
- アナロジー選択UI

**Stage 2（整理）:**
- 時間軸スライダー
- ペルソナ視点切替
- カード仕分けUI
- 依存関係マッピング（Reactivity活用）

**Stage 3（収束）:**
- マトリックスUI
- 優先度スライダーグリッド（Reactivity活用）
- トレードオフ天秤（Reactivity活用）

**まとめ:**
- 構造化文章まとめ

### 4.4 Widget-to-Widget Reactivityの実装例

#### 例1: 優先度スライダー → ランキング表示
```
[左側] 複数軸スライダー
  - 緊急度: ●━━━━━━━━━
  - 重要度: ━━━━━●━━━━
  - 工数:   ━━━━━━━●━━
       ↓ リアルタイム連動
[右側] 優先順位ランキング
  1. プロジェクトA（スコア: 78）
  2. プロジェクトB（スコア: 65）
  3. プロジェクトC（スコア: 52）
```

#### 例2: トレードオフ天秤
```
[左側] リスク要因リスト（重み調整可能）
  - 評価低下リスク: ●━━━━━
  - 時間不足リスク: ━━━●━━
       ↓ リアルタイム連動
[右側] 天秤ビジュアライゼーション
  リスク ⚖️ リターン
  [40%]     [60%]
```

### 4.5 DSL仕様

#### 4.5.1 OODM定義
- データ型の事前定義（思考整理特化）
- セッションスコープ / ステップスコープ

#### 4.5.2 DpG定義
- Widget間の依存関係
- リアルタイムバインディング設定
- 変換関数の指定

#### 4.5.3 UI仕様
- コンポーネント選択と設定
- レイアウト（単独 / 左右分割 / 上下分割）
- データバインディング

---

## 5. Evaluation

### 5.1 評価の目的と構成
- **RQ1**: ドメイン特化によるトークン削減効果はあるか？
- **RQ2**: Widget-to-Widget Reactivityは適切に生成されるか？
- **RQ3**: 生成されるUIフローは思考整理に適切か？

### 5.2 実験1: 技術性能評価

#### 5.2.1 トークン使用量
- 測定項目：OODM生成、DSL生成、合計
- Jellyとの比較（論文からの推定値ベース）
- 期待される結果：30%以上の削減

#### 5.2.2 生成成功率
- 構文エラー率
- 実行エラー率
- 期待される結果：90%以上の成功

#### 5.2.3 レスポンス時間
- OODM生成時間
- DSL生成時間
- UI描画時間

### 5.3 実験2: 専門家評価（10ケース）

#### 5.3.1 サンプルケース設計
- 8種類のボトルネックを網羅
- Reactivity活用ケースを5件含む
- 複雑度のバリエーション

#### 5.3.2 評価項目
- ボトルネック診断の適切性
- コンポーネント選択の適切性
- フロー構成の論理性
- Widget-to-Widget Reactivityの有効性
- UI設定のカスタマイズ適合性
- 総合評価

### 5.4 実験3: ユーザー検証（5名）

#### 5.4.1 実験プロトコル
- 各参加者2-3セッション
- 事前・事後アンケート
- 半構造化インタビュー

#### 5.4.2 収集データ
- 操作ログ（各Widgetでの操作時間、選択変更回数）
- アンケート回答
- インタビュー内容

#### 5.4.3 評価項目
- UI適合度
- 思考整理効果の実感
- UI遷移の自然さ
- Reactivityの認識度

### 5.5 結果（予定）

#### 5.5.1 RQ1: トークン削減効果
- 本システム平均トークン数：約XXXX
- Jelly推定値との比較：XX%削減
- 考察：ドメイン特化による効果

#### 5.5.2 RQ2: Reactivity生成
- 構文エラー率：X%
- 専門家評価（意味的妥当性）：X.X/5
- 有効だったReactivityパターンの分析

#### 5.5.3 RQ3: UIフロー適切性
- 専門家評価平均：X.X/5
- ユーザー満足度平均：X.X/5
- ボトルネックタイプ別の傾向

---

## 6. Discussion

### 6.1 設計パラダイムの妥当性

#### 6.1.1 固定と動的の判断は適切だったか
- トークン削減効果からの検証
- 生成品質からの検証
- ユーザー体験からの検証

#### 6.1.2 他ドメインへの適用可能性
- 本パラダイムの一般化可能な部分
- ドメイン固有の調整が必要な部分

### 6.2 Widget-to-Widget Reactivityの効果

#### 6.2.1 「固定UIでいい」反論への回答
- Reactivityにより実現できた価値
- 固定UIでは得られない体験

#### 6.2.2 Reactivityパターンの類型化
- 有効だったパターン
- うまくいかなかったパターン

### 6.3 制約と限界

#### 6.3.1 技術的制約
- LLMの生成品質への依存
- レスポンス時間
- コスト

#### 6.3.2 評価の限界
- サンプルサイズ
- 短期的な評価
- Jellyとの直接比較の困難さ

### 6.4 設計判断の振り返り

#### 6.4.1 うまくいった判断
- 3ステージ構造
- コンポーネント数の限定
- Reactivityの導入

#### 6.4.2 改善の余地がある判断
- （評価結果に基づいて記述）

---

## 7. Future Work

### 7.1 タスク実行フェーズの実装
- Breakdownで生成されたタスクの実行支援
- アプリを開くたびにUIを動的生成

### 7.2 Context-Aware強化
- デバイス情報の活用（曜日、時刻、空き時間、現在地、画面サイズ）
- 状況に応じたUI最適化

### 7.3 ローカルLLM対応
- ネットワーク非依存
- プライバシー配慮が必要なタスクへの対応

### 7.4 他ドメインへの適用
- 設計パラダイムの一般化
- 異なるドメインでの検証

---

## 8. Conclusion

- ドメイン特化型LLM動的UI生成の設計パラダイムを提示した
- 「何を固定し、何を動的にすべきか」の判断基準を体系化した
- Widget-to-Widget Reactivityにより、固定UIでは実現できない価値を実証した
- 思考整理支援アプリを題材に、提案手法の有効性を検証した
- 本パラダイムは他のドメイン特化型動的UIシステムの設計にも適用可能である

---

## 付録

### A. コンポーネント詳細仕様
### B. DSL完全仕様
### C. 専門家評価シート
### D. ユーザー検証プロトコル
### E. 評価ケース詳細（10ケース）

{
  "version": "6",
  "dialect": "sqlite",
  "id": "0081d535-e4fa-42b7-ab8a-cf07ea15ff6b",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "tables": {
    "experiments": {
      "name": "experiments",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false,
          "default": "(lower(hex(randomblob(16))))"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "config_version": {
          "name": "config_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "weights_version": {
          "name": "weights_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "start_date": {
          "name": "start_date",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "end_date": {
          "name": "end_date",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "measurement_events": {
      "name": "measurement_events",
      "columns": {
        "event_id": {
          "name": "event_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false,
          "default": "(lower(hex(randomblob(16))))"
        },
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "anonymous_user_id": {
          "name": "anonymous_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "recorded_at": {
          "name": "recorded_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "screen_id": {
          "name": "screen_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "ui_variant": {
          "name": "ui_variant",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "generation_id": {
          "name": "generation_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "metadata": {
          "name": "metadata",
          "type": "blob",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "experiment_condition": {
          "name": "experiment_condition",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "config_version": {
          "name": "config_version",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_events_user_time": {
          "name": "idx_events_user_time",
          "columns": [
            "anonymous_user_id",
            "recorded_at"
          ],
          "isUnique": false
        },
        "idx_events_session_type": {
          "name": "idx_events_session_type",
          "columns": [
            "session_id",
            "event_type"
          ],
          "isUnique": false
        },
        "idx_events_variant_type": {
          "name": "idx_events_variant_type",
          "columns": [
            "ui_variant",
            "event_type"
          ],
          "isUnique": false
        },
        "idx_events_generation": {
          "name": "idx_events_generation",
          "columns": [
            "generation_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "measurement_events_generation_id_ui_generation_requests_generation_id_fk": {
          "name": "measurement_events_generation_id_ui_generation_requests_generation_id_fk",
          "tableFrom": "measurement_events",
          "tableTo": "ui_generation_requests",
          "columnsFrom": [
            "generation_id"
          ],
          "columnsTo": [
            "generation_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "priority_scores": {
      "name": "priority_scores",
      "columns": {
        "score_id": {
          "name": "score_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false,
          "default": "(lower(hex(randomblob(16))))"
        },
        "anonymous_user_id": {
          "name": "anonymous_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "calculated_at": {
          "name": "calculated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        },
        "context_factors": {
          "name": "context_factors",
          "type": "blob",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "config_version": {
          "name": "config_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "weights_version": {
          "name": "weights_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "concern_scores": {
          "name": "concern_scores",
          "type": "blob",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_scores_user_time": {
          "name": "idx_scores_user_time",
          "columns": [
            "anonymous_user_id",
            "calculated_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "system_logs": {
      "name": "system_logs",
      "columns": {
        "log_id": {
          "name": "log_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false,
          "default": "(lower(hex(randomblob(16))))"
        },
        "logged_at": {
          "name": "logged_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        },
        "level": {
          "name": "level",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "component": {
          "name": "component",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "metadata": {
          "name": "metadata",
          "type": "blob",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "request_id": {
          "name": "request_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_logs_time_level": {
          "name": "idx_logs_time_level",
          "columns": [
            "logged_at",
            "level"
          ],
          "isUnique": false
        },
        "idx_logs_component_time": {
          "name": "idx_logs_component_time",
          "columns": [
            "component",
            "logged_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "ui_generation_requests": {
      "name": "ui_generation_requests",
      "columns": {
        "generation_id": {
          "name": "generation_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false,
          "default": "(lower(hex(randomblob(16))))"
        },
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "anonymous_user_id": {
          "name": "anonymous_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "requested_at": {
          "name": "requested_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        },
        "concern_text": {
          "name": "concern_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "selected_category": {
          "name": "selected_category",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "selected_approach": {
          "name": "selected_approach",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "urgency_choice": {
          "name": "urgency_choice",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "concern_level": {
          "name": "concern_level",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "custom_action_text": {
          "name": "custom_action_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "time_of_day": {
          "name": "time_of_day",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "available_time_min": {
          "name": "available_time_min",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "factors": {
          "name": "factors",
          "type": "blob",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "ui_variant": {
          "name": "ui_variant",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "novelty_level": {
          "name": "novelty_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "ui_dsl": {
          "name": "ui_dsl",
          "type": "blob",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "model_used": {
          "name": "model_used",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "seed_used": {
          "name": "seed_used",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "processing_time_ms": {
          "name": "processing_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "fallback_used": {
          "name": "fallback_used",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "prompt_tokens": {
          "name": "prompt_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "response_tokens": {
          "name": "response_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_generation_user_time": {
          "name": "idx_generation_user_time",
          "columns": [
            "anonymous_user_id",
            "requested_at"
          ],
          "isUnique": false
        },
        "idx_generation_session": {
          "name": "idx_generation_session",
          "columns": [
            "session_id"
          ],
          "isUnique": false
        },
        "idx_generation_variant_novelty": {
          "name": "idx_generation_variant_novelty",
          "columns": [
            "ui_variant",
            "novelty_level"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "user_assignments": {
      "name": "user_assignments",
      "columns": {
        "anonymous_user_id": {
          "name": "anonymous_user_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "experiment_id": {
          "name": "experiment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "condition": {
          "name": "condition",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "assigned_at": {
          "name": "assigned_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        }
      },
      "indexes": {
        "idx_assignment_exp_condition": {
          "name": "idx_assignment_exp_condition",
          "columns": [
            "experiment_id",
            "condition"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "user_assignments_experiment_id_experiments_id_fk": {
          "name": "user_assignments_experiment_id_experiments_id_fk",
          "tableFrom": "user_assignments",
          "tableTo": "experiments",
          "columnsFrom": [
            "experiment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}
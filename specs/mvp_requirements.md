# MVP要件定義書
*LLM動的UI「頭の棚卸しノート」 - 研究用プロトタイプ*

## 📖 アプリケーションコンセプト

### 基本思想：脳のキャッシュメンテナンス
「卒業研究」「友達との旅行計画」「就職活動」「ジム再開」など、頭の中に常駐している多数の関心事・気掛かりがブレインフォグを引き起こし、集中力を下げてしまう問題を解決するアプリです。

### 解決アプローチ
- **抽象的な入り口**: 「やらなきゃ」という段階で、まだ具体化されていない関心事をそのまま書き出せる
- **段階的な具体化**: 実態把握→方針立案→細分化のフローで認知負荷を分散
- **脳のワーキングメモリ拡張**: アプリに外部化することで思考の余裕を作り出す
- **procrastination対策**: 従来のタスク管理アプリより着手ハードルを大幅に下げる

### ターゲット関心事
- 成果物を求められる活動（卒業研究、プロジェクト）
- イベント・計画（旅行、引越し、就職活動）  
- 目標のある活動（部屋探し、資格取得）
- 生活習慣改善（運動再開、睡眠の質向上）

## エンジニア質問への回答

**Q: CBTフロー「実態把握→方針立案→細分化」の実装優先度は？**

**A: 「細分化」機能を最優先で実装してください。**

### 理由
1. **研究の核心測定ポイント**: ユーザが最も頻繁にインタラクションする部分
2. **動的UI効果の最大化**: タスク促し→行動報告のサイクルで新規性効果を継続測定可能
3. **比較実験の実現**: 固定UI版との着手率差異を明確に測定できる

---

## 📋 MVP機能仕様

### 🎯 研究目標との対応
- **独自性A**: UIの動的新規性制御による介入受容性向上
- **独自性B**: LLM-Hardened DSLアーキテクチャの安全な実装
- **目標1**: プロトタイプ実装完了
- **目標3**: 短期ユーザ評価の実施

### 📱 コア機能一覧

#### 1. 関心事整理システム（実態把握→方針立案→細分化）
```
- 関心事の自由入力フォーム（抽象的な入り口）
- 関心レベル・切迫度の可視化
- 関心事の性質分類支援（学習系/イベント系/習慣系/仕事系）
- アプローチタイプ提案（情報整理/具体的行動/計画・戦略）
- 2分ルール適用による具体的アクション生成
- 頭の「使用率」とスッキリ度の測定
```

#### 2. 動的促しUIシステム ⭐️最重要（細分化フェーズ）
```
- 状況データ自動収集
  - 現在時刻
  - 位置カテゴリ（家/職場/移動中/その他）
  - 空き時間予測
- 優先スコア計算エンジン
  - importance, urgency, staleness, contextFit等の線形結合
- LLM-DSL UI生成API連携
- 📊 行動報告ボタン（着手測定の核心）
```

#### 3. 比較実験システム
```
- 固定UI版アプリ（同じロジック、静的デザイン）
- ユーザ割り当て機能（動的版 vs 固定版）
- A/Bテスト用データ収集
```

#### 4. 測定・ログシステム
```
- 着手率測定: UI表示 → 行動報告のコンバージョン率
- 頭のスッキリ度評価（3段階スケール、アクション完了後）
- ブレインフォグ改善度の自己評価
- ワーキングメモリ使用率の体感測定
- 全UIインタラクションログ
- UI生成パターンと行動の関連性追跡
```

### 📊 測定指標

**第一指標**: タスクへの着手率
- 促しUI表示回数 vs 行動報告回数  
- 動的UI版 vs 固定UI版の比較

**第二指標**: 認知負荷軽減の自己評価
- アクション完了後の頭のスッキリ度（3段階）
- ブレインフォグ改善の体感
- ワーキングメモリ使用率の変化

**補助指標**: 
- 継続利用率
- UI生成パターン別着手率
- 同タスク再着手回数

---

## 🚀 実装優先度・フェーズ

### Phase 1: 基盤システム（Week 1-2）
1. 関心事入力・整理機能（実態把握フェーズ）
2. 方針立案支援機能（アプローチ選択）
3. 状況データ収集機構
4. 基本的なCRUD操作

### Phase 2: 固定UI版（Week 3）
1. 細分化フェーズの促しUI（静的デザイン）
2. 2分ルールアクション生成
3. 行動報告システム
4. スッキリ度測定機能

### Phase 3: 動的UI版（Week 4）
1. LLM-DSL API連携
2. UI生成エンジン実装
3. 新規性レベル制御（簡易版）

### Phase 4: 測定・比較（Week 5-6）
1. A/Bテストシステム
2. データ分析ダッシュボード
3. 実験用の最終調整

---

## 🔧 技術仕様要件

### アーキテクチャ
- **クライアント**: SwiftUI + WKWebView
- **サーバー**: Bun/Hono
- **LLM**: Gemini 2.5 Flash-Lite

### API設計
```
POST /v1/ui/generate - UI DSL生成
POST /v1/score/rank  - 優先スコア計算
POST /v1/events/batch - イベントログ送信
GET  /v1/config      - 設定配布
```

### セキュリティ・プライバシー
- 個人情報はローカル保存のみ
- サーバーには匿名化された要約のみ送信
- UI生成は安全性検証済みDSLのみ
- TLS暗号化必須

---

## ❌ MVP範囲外（後回し）

- 高度な個人化機能（プリセット重みで十分）
- 高度なパーソナライゼーション
- 長期的な学習・適応機能
- ゲーミフィケーション要素
- ソーシャル機能

---

## 📝 実装メモ

### 着手の定義
**「行動報告ボタンをタップした瞬間」** = 着手とみなす
- UIでの促し表示から報告までの時間を測定
- 報告内容の検証は行わない（自己申告ベース）
- 完了時に「頭のスッキリ度」も同時測定

### 新しい測定要素
**頭の使用率**: 関心事がどれくらい思考を占めているかの主観的評価
**スッキリ度**: アクション完了後の認知負荷軽減の体感
**アプリ離脱時のブレインフォグ状態**: セッション終了時の頭の整理状況

### ユーザ評価サイクル
- **期間**: 1週間程度
- **頻度**: ユーザのペースに任せる
- **対象者**: 5名程度の短期評価

### 測定可能性の確保
- 全インタラクションにタイムスタンプ
- UI生成リクエスト〜表示〜行動報告の追跡ID付与
- 再現可能な実験条件の記録

---

*作成日: 2025年9月15日*  
*最終更新: 2025年9月15日*

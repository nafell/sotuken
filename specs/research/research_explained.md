### ゴール
- 学部生でも理解できるように、`specs/research/research_plan.md` と `specs/research/experiment_protocol.md` の内容をやさしく解説します。
- 各「決定事項」について、意図/目的/利点/期待効果を明確にします。
- すぐにキャッチアップできるよう、用語・流れ・見どころを整理します。

## 1) 研究計画書のやさしい解説（`specs/research/research_plan.md`）
### 何を調べる？
- 「状況に合わせて毎回変わるUI（動的UI）」と「固定UI」を比べて、ユーザの行動（起動・着手・完了）や認知負荷（頭のスッキリ度・ブレインフォグ改善）に違いが出るかを検証します。

### なぜそれを調べる？
- 従来のタスク管理アプリは認知負荷が高く、頭の中に多数常駐している関心事・気掛かりによるブレインフォグ（思考の霧）を解決できない問題があるため。抽象的な入り口から段階的に具体化することで、procrastination（先延ばし）を防ぎ、脳のワーキングメモリを拡張する「頭の棚卸しノート」として機能させることを目指しています。

### どうやって調べる？（全体デザイン）
- 4つの条件にユーザをランダムに分けて比較（ユーザごとに1条件を固定）。
  - C0: 固定UI（新規性なし）
  - C1: 動的UI（新規性＝中で固定）
  - C2: 動的UI（状況に応じて新規性Low/Med/Highを切替）
  - C3: C2＋生体情報（許諾した人のみ粗い区分で利用）
- 期間: 最短14日（推奨28日）。短すぎると慣れ/飽きの影響が見えにくいので、2〜4週間で傾向を見ます。

### 何を数える？（評価指標）
- 主要:
  - 起動回数/日、起動→着手までの時間
  - 上位3件の着手率、1セッション完了率
  - 頭のスッキリ度の変化（前後の差）、ブレインフォグ改善度
  - ワーキングメモリ使用率の体感変化
- 副次:
  - 通知→行動への転換率、滞留の短縮、セッション長、UIへの飽き指標
  - 関心事整理の完了率（実態把握→方針立案→細分化フロー）

### どんな工夫で「研究っぽく」している？
- 再現性の担保:
  - サーバで設定を凍結（`configVersion=v1`）して配布
  - LLMはサーバサイドで「決定論モード」（固定パラメータ＋seed）で呼び出し（モデル: Gemini 2.5 Flash mini）
  - 過去の生成UIを同条件で再生成して照合できる「リプレイAPI」
- 匿名・安全:
  - 匿名IDのみ使用、PIIや正確な位置は保存しない
  - 生体は「low/med/high」の粗い区分のみサーバへ、OFFでも使える設計
  - 危険な提案を防ぐため、UIはホワイトリストDSLで構築

### サンプルサイズと統計
- 効果量d=0.3想定で各群約175人（合計約700人）を目安に設計（実情に合わせて調整）
- t検定や一般化線形モデルで群間比較、多重比較はHolm補正
- 欠測は事前ルール＋感度分析でフェアに扱う

### 期待されるインパクト
- 動的UI（と新規性制御）が着手と認知負荷軽減にポジティブな影響を与えるかを、実用レベルで確かめられる
- 「頭の棚卸し」というアプローチがブレインフォグ改善とprocrastination対策に効果的かを実証できる
- 生体の粗区分を使った「無理しない提案」が有効かを見極められる

## 2) 実験プロトコルのやさしい解説（`specs/research/experiment_protocol.md`）
### 実験の運用ルール
- 登録→ランダム割付→日常利用→ログ収集→解析、の流れを明確化
- 主要/副次指標、停止基準（安全/費用/効果）を先に決めておく
- すべてのイベントに`configVersion`と条件（`abCondition`）を付与→あとで条件別に解析が可能

### ログの取り方（なぜその項目？）
- `ui_generated`, `ui_rendered`, `card_clicked`, `action_executed`, `concern_organized`, `task_completed`, `notification_shown/clicked`, `cognitive_load_reported`など
- 行動の流れ（生成→表示→クリック→実行→完了）と、認知状態（自己申告の頭のスッキリ度・ブレインフォグ状態）を一緒に追えるから
- `responseId`や`configSnapshotHash`で「当時のUIを再生」でき、因果関係の再点検が可能
- CBTフロー（実態把握→方針立案→細分化）の各段階の進行も記録

### 倫理・プライバシー
- 参加は同意ベース、生体は任意
- データは匿名・最小限・サマリ（区分化）中心
- 公開時は再同定できない形に限定

## 3) 主要な「決定事項」の意図/目的/利点/期待効果
- サーバサイドLLM（Gemini 2.5 Flash mini）
  - 意図/目的: iOS審査回避とセキュア運用、ログと再現性の集中管理
  - 利点: seed/設定の固定・バージョン管理・キャッシュ・フォールバックが容易
  - 期待効果: 同一条件で同じUIを生成でき、研究の信頼性が上がる
- 設定凍結（`configVersion=v1`）と配布API（`/v1/config`）
  - 意図: 「どの設定で走ったか」を常に追えるようにする
  - 利点: 解析や再現実験がやりやすい
  - 期待効果: 実験条件のブレを最小化
- UI DSL（v1.1）＋ホワイトリストコンポーネント
  - 意図: LLM出力の自由度を安全に限定
  - 利点: 審査対応・安全性・安定性・検証可能性
  - 期待効果: 危険/不適切UIを抑止しつつ、毎回のUIを定型的に比較できる
- 新規性（Novelty）ポリシー（Low/Med/High、日次予算あり）
  - 意図: 新鮮さで注意を引きたいが、過刺激は避けたい
  - 利点: 変化の強さを制御し、ユーザ体験のムラを抑える
  - 期待効果: 「飽きにくい×疲れにくい」バランスの良いUIで着手を促す
- プリセット重み（優先スコアの個人化は保留）
  - 意図: 再現性を最優先し、条件間比較を正しく行う
  - 利点: 複雑な個人化ロジックによるブレを排除
  - 期待効果: 動的UIそのものの効果を純粋に測定できる
- HealthKit Phase 0（心拍/HRVの粗区分）
  - 意図: 生体に配慮しつつ、提案の重さを調整する材料を入れる
  - 利点: プライバシー保護（区分のみ）、OFFでも機能低下が小さい
  - 期待効果: 体調がしんどい時に「軽い行動」へ誘導でき、認知負荷軽減につながる可能性
- ランダム割付（ユーザ単位のハッシュ）
  - 意図: 条件の偏りを防ぐ、途中で条件が変わらない
  - 利点: 交絡要因を減らし、公平な比較ができる
  - 期待効果: 条件による効果差が「本物か」を判定しやすい
- リプレイAPI（`/v1/replay/generate`）
  - 意図: 過去のUIを「同じ条件で」再生成できるようにする
  - 利点: 仕様変更・モデル更新が影響したかを点検できる
  - 期待効果: 研究結果の追試・再解析がしやすい

## 4) 流れをイメージできる「1日の例」
- 起動 → 頭の中の気になることを自由入力で書き出し
- 整理 → 関心度・切迫度を測定、性質分類（学習系/イベント系/習慣系など）
- 方針決定 → アプローチタイプ選択（情報整理/具体的行動/戦略立案）
- 細分化 → サーバが状況＋関心事データでUI DSLを生成、2分ルールで具体的アクション提案
- 行動 → タイマーやチェックリストで2分だけ着手
- 記録 → クリック/完了/頭のスッキリ度をイベントでサーバに送信
- 振り返り → ワーキングメモリ使用率の変化を可視化
- 翌日 → 新規性ポリシーに基づいて、飽きにくく疲れにくい変化を提示

## 5) すぐキャッチアップしたい人向けの読み順
1) `specs/development/developer_guide.md`（全体像とAPI叩き方の最短ルート）
2) `api/openapi.yaml`（どのAPIがあるか）
3) `specs/api-schema/ui_dsl_v1.1.json`（UIがどう表現されるか）
4) `specs/research/experiment_protocol.md`（実験の運用ルール）
5) `specs/research/research_plan.md`（背景〜統計まで一通り）
6) `specs/api-schema/events-schema.json`（何をログに残すか）

## 6) よくある疑問
- Q: なぜ個人化（学習）を最初から使わないの？
  - A: 再現性と比較の公正さを保つため。まずは「動的UIそのものの効果」を測る。
- Q: 生体データは危なくない？
  - A: サーバへ送るのは「区分（low/med/high）」のみ。OFFでも使える。許諾も任意。
- Q: 「seed」って何？
  - A: LLMがランダムに揺れないよう固定する「乱数のタネ」。同条件→同出力を目指す鍵。

---

- 参考ファイル
  - 設計全体: `specs/research/research_plan.md`
  - 実験運用ルール: `specs/research/experiment_protocol.md`
  - 開発者向け導入: `specs/development/developer_guide.md`
  - 設定スナップショット: `config/config.v1.json`

必要なら、この解説をスライド用に短縮版として再構成した資料や、研究事前登録用の要約文面も用意します。